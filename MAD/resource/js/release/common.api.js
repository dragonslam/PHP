if("undefined"==typeof com)var com={};"undefined"==typeof com.mad&&(com.mad={});"undefined"==typeof com.mad.api&&(com.mad.api={});com.mad.api.API_ROOT=document.location.protocol+"//"+document.location.hostname+"/api/mad";com.mad.api.common=function(){this.msg=new com.mad.message.hendler("API")};com.mad.api.common.prototype={logging:function(b){$debug("com.mad.api.common : "+b)},validation:function(b,a,c){if("object"!=typeof a[0])return this.logging("Validation Object not found."),!1;if("EMPTY"==b){if(String(a.val()).isEmpty())return"string"==typeof c&&""!=c&&this.msg.call(c),a.val("").focus(),!1}else if("EMAIL"==b){if(String(a.val()).isEmpty())return this.msg.call("LOGIN_EMPTY_EMAIL"),a.val("").focus(),!1;if(!String(a.val()).isEmail())return this.msg.call("LOGIN_NONE_VALID_EMAIL"),a.val("").focus(),!1}else if("PASSWORD"==b){if(String(a.val()).isEmpty())return this.msg.call("LOGIN_EMPTY_PASSWORD"),a.val("").focus(),!1;if(6>String(a.val()).length)return this.msg.call("LOGIN_NONE_VALID_PWD"),a.val("").focus(),!1}else if("URL"==b){if(String(a.val()).isEmpty())return this.msg.call("SYS_EMPTY_URL"),a.val("http://").focus(),!1;if(!String(a.val()).isUrl()||10>String(a.val()).length)return this.msg.call("SYS_NVALID_URL"),a.focus(),!1}return!0},getDomain:function(b){return b.match(/http[s]*:\/\/([a-zA-Z0-9\-\.]*)/)[0]},getUserID:function(){return Cookie().get("usr_num")},chkLogin:function(){return"true"!=Cookie().get("isLogin")||Cookie().get("usr_num").isEmpty()?(this.msg.call("SYS_LOGIN_SERVICE"),!1):!0},send:function(b,a,c,e){var d=this;d.logging("send('"+b+"');");if(String(b).isEmpty())throw d.logging("url argument exception."),Error("url argument exception.");var f="boolean"==typeof e&&1==e,g=null,h="";e="";f&&(g=Cache("cache"),h=String(b).replaceAll("/","").replaceAll(".php","")+"@"+JSONtoString(a),e=g.get(h));""!=e?"function"==typeof c&&c($.parseJSON(e)):$.ajax({type:"post",url:com.mad.api.API_ROOT+b,async:!0,dataType:f?"text":"json",timeout:2E3,cache:!1,data:"object"==typeof a?a:{q:""},contentType:"application/x-www-form-urlencoded; charset=UTF-8",error:function(a,b,c){d.logging("Ajax Error code : "+a.status+"\r\nmessage : "+a.reponseText);throw Error(a.reponseText);},success:function(a,b,e){d.logging("Ajax Success code : "+e.status+"\r\nmessage : "+e.statusText);f?(g.set(h,a),"function"==typeof c&&c($.parseJSON(a))):"function"==typeof c&&c(a)}})}};
com.mad.api.member=function(){this.common=new com.mad.api.common;this.msg=new com.mad.message.hendler("MEMBER")};com.mad.api.member.API_Login="/login.php";com.mad.api.member.API_Register="/register.php";com.mad.api.member.API_Find_PW="/forgot_passwd.php";com.mad.api.member.API_Change_PW="/change_passwd.php";com.mad.api.member.prototype={logging:function(b){$debug("com.mad.api.member : "+b)},register:function(b,a,c,e){var d=this;d.logging("register();");"object"!=typeof b[0]||"object"!=typeof a[0]||"object"!=typeof c[0]?this.logging("Regist Object not found."):d.common.validation("EMAIL",b)&&d.common.validation("PASSWORD",a)&&(a.val()!=c.val()?this.msg.call("LOGIN_NONE_COMP_PWD"):d.common.send(com.mad.api.member.API_Register,{email:b.val(),passwd:a.val(),locale:"KR"},function(a){String(a.err).equals("0")&&!String(a.ret).isEmpty()?(d.logging("regist complate."),"function"==typeof e&&e()):d.logging("regist error - "+String(a.err))}))},login:function(b,a,c,e){var d=this;d.logging("login();");"object"!=typeof b[0]||"object"!=typeof a[0]?this.logging("Login Object not found."):d.common.validation("EMAIL",b)&&d.common.validation("PASSWORD",a)&&d.common.send(com.mad.api.member.API_Login,{email:b.val(),passwd:a.val()},function(a){String(a.err).equals("0")&&!String(a.ret).isEmpty()?(d.logging("login complate."),d.loginComplate(String(b.val()),String(a.ret)),"function"==typeof c&&c()):(d.logging("login error - "+String(a.err)),"function"==typeof e&&e(String(a.err)))})},loginComplate:function(b,a){Cookie(1).set("isLogin","true").set("user_mail",b).set("usr_num",a)},logout:function(b){Cookie(0).remove("isLogin","").remove("user_mail").remove("usr_num");"function"==typeof b&&b()},change_password:function(b,a,c,e){var d=this;d.logging("change password();");"object"!=typeof b[0]||"object"!=typeof a[0]||"object"!=typeof c[0]?this.logging("Regist Object not found."):d.common.chkLogin()&&d.common.validation("PASSWORD",b)&&d.common.validation("PASSWORD",a)&&(a.val()!=c.val()?alert("\ubcc0\uacbd\ud558\ub824\ub294 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."):d.common.send(com.mad.api.member.API_Change_PW,{user_id:d.common.getUserID(),passwd:b.val(),new_passwd1:a.val(),new_passwd2:c.val()},function(a){String(a.err).equals("0")&&!String(a.ret).isEmpty()?(d.logging("change password complate."),"function"==typeof e&&e()):d.logging("regist error - "+String(a.err))}))},missing_password:function(b,a){var c=this;c.logging("missing password();");"object"!=typeof b[0]?this.logging("Email Object not found."):c.common.validation("EMAIL",b)&&c.common.send(com.mad.api.member.API_Find_PW,{email:b.val()},function(b){String(b.err).equals("0")&&!String(b.ret).isEmpty()?(c.logging("email regist complate."),"function"==typeof a&&a()):c.logging("regist error - "+String(b.err))})}};
com.mad.api.tracking=function(b){this.common=new com.mad.api.common;this.msg=new com.mad.message.hendler("TRACKING");this.oSelect="object"==typeof b?b:""};com.mad.api.tracking.API_GET_LIST="/get_tracking_list.php";com.mad.api.tracking.API_GET_EVENT="/get_tracking_event.php";com.mad.api.tracking.API_GET_SOCIAL="/get_tracking_social.php";com.mad.api.tracking.API_SET_EVENT="/set_tracking_event.php";com.mad.api.tracking.API_SET_SOCIAL="/set_tracking_social.php";com.mad.api.tracking.API_DEL_EVENT="/delete_tracking_event.php";com.mad.api.tracking.API_DEL_SOCIAL="/delete_tracking_social.php";com.mad.api.tracking.Category={0:"\ud328\uc158",1:"\ubdf0\ud2f0",2:"\uc1fc\ud551",3:"\ub274\uc2a4",4:"\uc74c\uc2dd/\uc678\uc2dd",5:"\uc2a4\ud3ec\uce20",6:"\ucde8\ubbf8/\ub808\uc838",7:"\uc5d4\ud130\ud14c\uc778\uba3c\ud2b8",8:"\uac8c\uc784",9:"\uc5ec\ud589",10:"\uad50\uc721",11:"\ube44\uc988\ub2c8\uc2a4",12:"\uc74c\uc545",13:"\uc560\uacac"};com.mad.api.tracking.prototype={logging:function(b){$debug("com.mad.api.tracking : "+b)},getList:function(){},getEvent:function(b,a,c){var e=this;e.logging("getEvent();");b=String(b).isEmpty()?"30":b;a=String(a).isEmpty()?"0":a;e.common.send(com.mad.api.tracking.API_GET_EVENT,{user_id:e.common.getUserID(),row_cnt:b,last_date:a},function(a){String(a.err).equals("0")?(e.logging("getEvent complate. size of "+String(a.cnt)),"function"==typeof c&&c(a)):e.logging("getEvent - "+String(a.err))},!0)},setEvent:function(b,a){var c=this;c.logging("setEvent();");if("object"!=typeof b[0])this.logging("Event URL Object not found.");else{var e=String(b.val());e.startWith("http://")||e.startWith("https://")||b.val("http://"+e);c.common.validation("URL",b)&&c.common.validation("EMPTY",c.oSelect,"SYS_EMPTY_EVENT_CART")&&c.common.send(com.mad.api.tracking.API_SET_EVENT,{user_id:c.common.getUserID(),domain:c.common.getDomain(b.val()),url:b.val(),category:c.oSelect.val()},function(b){String(b.err).equals("0")?(c.logging("setEvent complate. "),"function"==typeof a&&a(b),Cache("cache").clear()):c.logging("setEvent - "+String(b.err))})}},delEvent:function(b,a,c){var e=this;e.logging("delEvent();");"string"!=typeof b||String(b).isEmpty()?this.logging("Event Domain ID not found."):e.common.send(com.mad.api.tracking.API_DEL_EVENT,{user_id:e.common.getUserID(),domain_id:b},function(b){String(b.err).equals("0")?(e.logging("delEvent complate. "),"function"==typeof a&&a(b),Cache("cache").clear()):(e.logging("delEvent - "+String(b.err)),"function"==typeof c&&c(b))})},getSocial:function(b,a,c){var e=this;e.logging("getSocial();");b=String(b).isEmpty()?"30":b;a=String(a).isEmpty()?"0":a;e.common.send(com.mad.api.tracking.API_GET_SOCIAL,{user_id:e.common.getUserID(),row_cnt:b,last_date:a},function(a){String(a.err).equals("0")?(e.logging("getSocial complate. size of "+String(a.cnt)),"function"==typeof c&&c(a)):e.logging("getSocial - "+String(a.err))},!0)},setSocial:function(b,a){var c=this;c.logging("setEvent();");if("object"!=typeof b[0])this.logging("Event URL Object not found.");else{var e=String(b.val());e.startWith("http://")||e.startWith("https://")||b.val("http://"+e);c.common.validation("URL",b)&&c.common.validation("EMPTY",c.oSelect,"SYS_EMPTY_EVENT_CART")&&c.common.send(com.mad.api.tracking.API_SET_SOCIAL,{user_id:c.common.getUserID(),domain:c.common.getDomain(b.val()),url:b.val(),category:c.oSelect.val()},function(b){String(b.err).equals("0")?(c.logging("setEvent complate. "),"function"==typeof a&&a(b),Cache("cache").clear()):c.logging("setEvent - "+String(b.err))})}},delSocial:function(b,a,c){var e=this;e.logging("delSocial();");"string"!=typeof b||String(b).isEmpty()?this.logging("Social Domain ID not found."):e.common.send(com.mad.api.tracking.API_DEL_SOCIAL,{user_id:e.common.getUserID(),domain_id:b},function(b){String(b.err).equals("0")?(e.logging("delSocial complate. "),"function"==typeof a&&a(b),Cache("cache").clear()):(e.logging("delSocial - "+String(b.err)),"function"==typeof c&&c(b))})},getTrackingCartgoryName:function(b){var a=com.mad.api.tracking.Category;return a&&a[b]?a[b]:""},bindTrackingCategory:function(b){this.logging("bindTrackingCategory();");if("object"==typeof this.oSelect){this.oSelect.empty();var a=com.mad.api.tracking.Category,c;for(c in a)a.hasOwnProperty(c)&&this.oSelect.append("<option value='"+c+"'>"+a[c]+"</option>");"function"==typeof b&&b()}},bindEventTracking:function(b){var a=this;a.logging("bindEventTracking();");"object"==typeof a.oSelect&&a.getEvent("","",function(c){a.oSelect.empty();if(0<c.cnt)for(var e=0;e<c.ret.length;e++){var d=c.ret[e];a.oSelect.append("<option value='"+d.domain_id+"'>"+d.url+"</option>")}else a.oSelect.append("<option value=''>"+a.msg.get("TRACK_EMPTY_DATA")+"</option>");"function"==typeof b&&b()})},bindSocialTracking:function(b){var a=this;a.logging("bindSocialTracking();");"object"==typeof a.oSelect&&a.getSocial("","",function(c){a.oSelect.empty();if(0<c.cnt)for(var e=0;e<c.ret.length;e++){var d=c.ret[e];a.oSelect.append("<option value='"+d.domain_id+"'>"+d.domain+"</option>")}else a.oSelect.append("<option value=''>"+a.msg.get("TRACK_EMPTY_DATA")+"</option>");"function"==typeof b&&b()})}};
com.mad.api.statistics=function(b,a){this.common=new com.mad.api.common;this.domain="object"==typeof b&&null!=b?b:null;this.delegate=a};com.mad.api.statistics.API_GET_ITEM_URL="/get_item_url.php";com.mad.api.statistics.API_GET_HOUR="/get_statistics_hour.php";com.mad.api.statistics.API_GET_DAY="/get_statistics_day.php";com.mad.api.statistics.API_GET_DAILY="/get_statistics_daily.php";com.mad.api.statistics.API_GET_MONTH="/get_statistics_month.php";com.mad.api.statistics.API_GET_VISITOR="/get_statistics_visitor.php";com.mad.api.statistics.API_GET_VISITOR_DAILY="/get_statistics_visitor_daily.php";com.mad.api.statistics.API_GET_PATH="/get_statistics_path.php";com.mad.api.statistics.API_GET_CURRENT="/get_statistics_current.php";com.mad.api.statistics.API_GET_CURRENT_SOCIAL="/get_statistics_current_social.php";com.mad.api.statistics.API_GET_CURRENT_ITEM="/get_statistics_current_item.php";com.mad.api.statistics.API_GET_CURRENT_SHARE="/get_statistics_current_share.php";com.mad.api.statistics.API_GET_CURRENT_VIEW="/get_statistics_current_view.php";com.mad.api.statistics.API_GET_CURRENT_VIEW_D="/get_statistics_current_view_by_like.php";com.mad.api.statistics.API_GET_CURRENT_TRAFFIC="/get_statistics_current_traffic.php";com.mad.api.statistics.API_GET_LAST_MONTH_SHARE="/get_statistics_last_month_share.php";com.mad.api.statistics.API_GET_LAST_MONTH_VIEW="/get_statistics_last_month_view.php";com.mad.api.statistics.API_GET_LAST_MONTH_VIEW_D="/get_statistics_last_month_view_by_like.php";com.mad.api.statistics.prototype={logging:function(b){$debug("com.mad.api.statistics : "+b)},getDomainID:function(){return this.domain.val()},getMaxValue:function(b){if(b instanceof Object){var a=0,c;for(c in b)b.hasOwnProperty(c)&&String(b[c]).isNumber()&&b[c]>a&&(a=b[c]);return a}return 0},getItemUrl:function(b){},getHour:function(b){var a=this;a.logging("getHour();");a.common.send(com.mad.api.statistics.API_GET_HOUR,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getHour complate. "),"function"==typeof b&&b(c)):a.logging("getHour - "+String(c.err))},!0)},getDaily:function(b){var a=this;a.logging("getDaily();");a.common.send(com.mad.api.statistics.API_GET_DAILY,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getDaily complate. "),"function"==typeof b&&b(c)):a.logging("getDaily - "+String(c.err))},!0)},getMonth:function(b){var a=this;a.logging("getMonth();");a.common.send(com.mad.api.statistics.API_GET_MONTH,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getMonth complate. "),"function"==typeof b&&b(c)):a.logging("getMonth - "+String(c.err))},!0)},getDay:function(b){var a=this;a.logging("getDay();");a.common.send(com.mad.api.statistics.API_GET_DAY,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getDay complate. "),"function"==typeof b&&b(c)):a.logging("getDay - "+String(c.err))},!0)},getCurrent:function(b){var a=this;a.logging("getCurrent();");a.common.send(com.mad.api.statistics.API_GET_CURRENT,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getCurrent complate. "),"function"==typeof b&&b(c)):a.logging("getCurrent - "+String(c.err))},!0)},getCurrentSocial:function(b){var a=this;a.logging("getCurrentSocial();");a.common.send(com.mad.api.statistics.API_GET_CURRENT_SOCIAL,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getCurrentSocial complate. "),"function"==typeof b&&b(c)):a.logging("getCurrentSocial - "+String(c.err))},!0)},getCurrentItem:function(b,a,c,e){var d=this;b=b?b:20;a=a?a:0;c=c?c:0;d.logging("getCurrentItem("+b+","+a+","+c+");");d.common.send(com.mad.api.statistics.API_GET_CURRENT_ITEM,{user_id:d.common.getUserID(),domain_id:d.getDomainID(),row_cnt:b,offset:b*a,sort_type:c},function(a){String(a.err).equals("0")?(d.logging("getCurrentItem complate. "),"function"==typeof e&&e(a)):d.logging("getCurrentItem - "+String(a.err))},!0)},getCurrentShare:function(b,a,c,e){var d=this;b=b?b:10;a=a?a:0;c=c?c:0;d.logging("getCurrentShare("+b+","+a+","+c+");");d.common.send(com.mad.api.statistics.API_GET_CURRENT_SHARE,{user_id:d.common.getUserID(),domain_id:d.getDomainID(),row_cnt:b,offset:b*a,sort_type:c},function(a){String(a.err).equals("0")?(d.logging("getCurrentShare complate. "),"function"==typeof e&&e(a)):d.logging("getCurrentShare - "+String(a.err))},!0)},getCurrentView:function(b,a,c,e){var d=this;b=b?b:10;a=a?a:0;c=c?c:0;d.logging("getCurrentView("+b+","+a+","+c+");");d.common.send(com.mad.api.statistics.API_GET_CURRENT_VIEW,{user_id:d.common.getUserID(),domain_id:d.getDomainID(),row_cnt:b,offset:b*a,sort_type:c},function(a){String(a.err).equals("0")?(d.logging("getCurrentView complate. "),"function"==typeof e&&e(a)):d.logging("getCurrentView - "+String(a.err))},!0)},getCurrentViewDetail:function(b){},getCurrentTraffic:function(b){var a=this;a.logging("getCurrentTraffic();");a.common.send(com.mad.api.statistics.API_GET_CURRENT_TRAFFIC,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getCurrentTraffic complate. "),"function"==typeof b&&b(c)):a.logging("getCurrentTraffic - "+String(c.err))},!0)},getLastMonthShare:function(b,a,c,e){var d=this;b=b?b:10;a=a?a:0;c=c?c:0;d.logging("getLastMonthShare("+b+","+a+","+c+");");d.common.send(com.mad.api.statistics.API_GET_LAST_MONTH_SHARE,{user_id:d.common.getUserID(),domain_id:d.getDomainID(),row_cnt:b,offset:b*a,sort_type:c},function(a){String(a.err).equals("0")?(d.logging("getLastMonthShare complate. "),"function"==typeof e&&e(a)):d.logging("getLastMonthShare - "+String(a.err))},!0)},getLastMonthView:function(b,a,c,e){var d=this;b=b?b:10;a=a?a:0;c=c?c:0;d.logging("getLastMonthView("+b+","+a+","+c+");");d.common.send(com.mad.api.statistics.API_GET_LAST_MONTH_VIEW,{user_id:d.common.getUserID(),domain_id:d.getDomainID(),row_cnt:b,offset:b*a,sort_type:c},function(a){String(a.err).equals("0")?(d.logging("getLastMonthView complate. "),"function"==typeof e&&e(a)):d.logging("getLastMonthView - "+String(a.err))},!0)},getLastMonthViewDetail:function(b,a,c,e){var d=this;b=b?b:10;a=a?a:0;c=c?c:0;d.logging("getLastMonthViewDetail("+b+","+a+","+c+");");d.common.send(com.mad.api.statistics.API_GET_LAST_MONTH_VIEW_D,{user_id:d.common.getUserID(),domain_id:d.getDomainID(),row_cnt:b,offset:b*a,sort_type:c},function(a){String(a.err).equals("0")?(d.logging("getLastMonthViewDetail complate. "),"function"==typeof e&&e(a)):d.logging("getLastMonthViewDetail - "+String(a.err))},!0)},getVisitor:function(b){var a=this;a.logging("getVisitor();");a.common.send(com.mad.api.statistics.API_GET_VISITOR,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getVisitor complate. "),"function"==typeof b&&b(c)):a.logging("getVisitor - "+String(c.err))},!0)},getVisitorDaily:function(b){var a=this;a.logging("getVisitorDaily();");a.common.send(com.mad.api.statistics.API_GET_VISITOR_DAILY,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.err).equals("0")?(a.logging("getVisitorDaily complate. "),"function"==typeof b&&b(c)):a.logging("getVisitorDaily - "+String(c.err))},!0)},getPath:function(b){var a=this;a.logging("getPath();");a.common.send(com.mad.api.statistics.API_GET_PATH,{user_id:a.common.getUserID(),domain_id:a.getDomainID()},function(c){String(c.ret.err).equals("0")?(a.logging("getPath complate. "),"function"==typeof b&&b(c)):a.logging("getPath - "+String(c.ret.err))},!0)},bindResult:function(b,a,c){if("string"==typeof b&&""!=b&&"object"==typeof a)for(var e in a)if("function"!=typeof a[e]){var d=b+"_"+e;"object"==typeof $("#"+d)[0]&&(this.logging("bind data - "+d),$("#"+d).hide("fast"),String(a[e]).isFinite()?$("#"+d).text(String(a[e]).money()+(c?c:"")):$("#"+d).text(a[e]+(c?c:"")),$("#"+d).show("slow"))}}};