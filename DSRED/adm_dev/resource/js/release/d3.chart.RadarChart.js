var RadarChart={draw:function(c,l,g){var a={radius:5,w:600,h:600,factor:1,factorLegend:.85,levels:3,maxValue:0,radians:2*Math.PI,opacityArea:.5,ToRight:5,TranslateX:80,TranslateY:30,ExtraWidthX:100,ExtraWidthY:100,color:d3.scale.category10(),viewLevel:!0,viewLable:!0};if("undefined"!==typeof g)for(var k in g)"undefined"!==typeof g[k]&&(a[k]=g[k]);a.maxValue=Math.max(a.maxValue,d3.max(l,function(a){return d3.max(a.map(function(a){return a.value}))}));g=l[0].map(function(a,b){return a.axis});var d=g.length;k=a.factor*Math.min(a.w/2,a.h/2);var n=d3.format("%");d3.select(c).select("svg").remove();var e=d3.select(c).append("svg").attr("width",a.w+a.ExtraWidthX).attr("height",a.h+a.ExtraWidthY).append("g").attr("transform","translate("+a.TranslateX+","+a.TranslateY+")"),m;for(c=0;c<a.levels-1;c++){var f=(c+1)/a.levels*k*a.factor;e.selectAll(".levels").data(g).enter().append("svg:line").attr("x1",function(h,b){return f*(1-a.factor*Math.sin(b*a.radians/d))}).attr("y1",function(h,b){return f*(1-a.factor*Math.cos(b*a.radians/d))}).attr("x2",function(h,b){return f*(1-a.factor*Math.sin((b+1)*a.radians/d))}).attr("y2",function(h,b){return f*(1-a.factor*Math.cos((b+1)*a.radians/d))}).attr("class","line").style("stroke","grey").style("stroke-opacity","0.75").style("stroke-width","0.3px").attr("transform","translate("+(a.w/2-f)+", "+(a.h/2-f)+")")}if(1==a.viewLevel)for(c=0;c<a.levels;c++)f=(c+1)/a.levels*k*a.factor,e.selectAll(".levels").data([1]).enter().append("svg:text").attr("x",function(h){return f*(1-a.factor*Math.sin(0))}).attr("y",function(h){return f*(1-a.factor*Math.cos(0))}).attr("class","legend").style("font-family","sans-serif").style("font-size","10px").attr("transform","translate("+(a.w/2-f+a.ToRight)+", "+(a.h/2-f)+")").attr("fill","#737373").text(n((c+1)*a.maxValue/a.levels));series=0;c=e.selectAll(".axis").data(g).enter().append("g").attr("class","axis");c.append("line").attr("x1",a.w/2).attr("y1",a.h/2).attr("x2",function(h,b){return a.w/2*(1-a.factor*Math.sin(b*a.radians/d))}).attr("y2",function(h,b){return a.h/2*(1-a.factor*Math.cos(b*a.radians/d))}).attr("class","line").style("stroke","grey").style("stroke-width","1px");1==a.viewLable&&c.append("text").attr("class","legend").text(function(a){return a}).style("font-family","sans-serif").style("font-size","11px").style("fill",function(a,b){return a.fill?a.fill:"#000000"}).attr("text-anchor","middle").attr("dy","1.5em").attr("transform",function(a,b){return"translate(0, -10)"}).attr("x",function(c,b){return a.w/2*(1-a.factorLegend*Math.sin(b*a.radians/d))-45*Math.sin(b*a.radians/d)}).attr("y",function(c,b){return a.h/2*(1-Math.cos(b*a.radians/d))-20*Math.cos(b*a.radians/d)});l.forEach(function(c,b){dataValues=[];e.selectAll(".nodes").data(c,function(b,c){dataValues.push([a.w/2*(1-parseFloat(Math.max(b.value,0))/a.maxValue*a.factor*Math.sin(c*a.radians/d)),a.h/2*(1-parseFloat(Math.max(b.value,0))/a.maxValue*a.factor*Math.cos(c*a.radians/d))])});dataValues.push(dataValues[0]);e.selectAll(".area").data([dataValues]).enter().append("polygon").attr("class","radar-chart-serie"+series).style("stroke-width","2px").style("stroke",a.color(series)).attr("points",function(a){for(var b="",c=0;c<a.length;c++)b=b+a[c][0]+","+a[c][1]+" ";return b}).style("fill",function(b,c){return a.color(series+2)}).style("fill-opacity",a.opacityArea).on("mouseover",function(a){z="polygon."+d3.select(this).attr("class");e.selectAll("polygon").transition(200).style("fill-opacity",.1);e.selectAll(z).transition(200).style("fill-opacity",.7)}).on("mouseout",function(){e.selectAll("polygon").transition(200).style("fill-opacity",a.opacityArea)});series++});series=0;l.forEach(function(c,b){e.selectAll(".nodes").data(c).enter().append("svg:circle").attr("class","radar-chart-serie"+series).attr("r",a.radius).attr("alt",function(a){return Math.max(a.value,0)}).attr("cx",function(b,c){dataValues.push([a.w/2*(1-parseFloat(Math.max(b.value,0))/a.maxValue*a.factor*Math.sin(c*a.radians/d)),a.h/2*(1-parseFloat(Math.max(b.value,0))/a.maxValue*a.factor*Math.cos(c*a.radians/d))]);return a.w/2*(1-Math.max(b.value,0)/a.maxValue*a.factor*Math.sin(c*a.radians/d))}).attr("cy",function(b,c){return a.h/2*(1-Math.max(b.value,0)/a.maxValue*a.factor*Math.cos(c*a.radians/d))}).attr("data-id",function(a){return a.axis}).style("fill",a.color(series)).style("fill-opacity",.9).on("mouseover",function(a){newX=parseFloat(d3.select(this).attr("cx"))-10;newY=parseFloat(d3.select(this).attr("cy"))-5;m.attr("x",newX).attr("y",newY).text(n(a.value)).transition(200).style("opacity",1);z="polygon."+d3.select(this).attr("class");e.selectAll("polygon").transition(200).style("fill-opacity",.1);e.selectAll(z).transition(200).style("fill-opacity",.7)}).on("mouseout",function(){m.transition(200).style("opacity",0);e.selectAll("polygon").transition(200).style("fill-opacity",a.opacityArea)}).append("svg:title").text(function(a){return Math.max(a.value,0)});series++});m=e.append("text").style("opacity",0).style("font-family","sans-serif").style("font-size","13px")}};